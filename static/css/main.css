/* Ddoli - Main Styles */
:root {
    --font-mono: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, monospace;
}

/* Prevent horizontal scroll */
html, body {
    overflow-x: hidden;
    max-width: 100vw;
}

/* Markdown styles */
.markdown-body {
    line-height: 1.7;
    overflow-wrap: anywhere;
    font-size: 0.9375rem;
}
.markdown-body > *:first-child { margin-top: 0; }
.markdown-body > *:last-child { margin-bottom: 0; }
.markdown-body h1 { font-size: 1.5rem; font-weight: 600; margin: 1.25rem 0 0.625rem; color: #1F1F1E; }
.markdown-body h2 { font-size: 1.25rem; font-weight: 600; margin: 1.25rem 0 0.625rem; color: #1F1F1E; }
.markdown-body h3 { font-size: 1.1rem; font-weight: 600; margin: 1rem 0 0.5rem; color: #1F1F1E; }
.markdown-body p { margin: 0.625rem 0; }
.markdown-body ul, .markdown-body ol { margin: 0.625rem 0; padding-left: 1.5rem; }
.markdown-body li { margin: 0.375rem 0; }
.markdown-body li > p { margin: 0.25rem 0; }
.markdown-body code {
    background: #F0EBE3;
    padding: 0.125rem 0.375rem;
    border-radius: 0.25rem;
    font-size: 0.85em;
    font-family: var(--font-mono);
    color: #C7254E;
    word-break: break-all;
}
.markdown-body pre {
    background: #1E1E1E;
    color: #D4D4D4;
    padding: 1rem;
    margin: 1rem 0;
    overflow-x: auto;
    font-size: 0.8125rem;
    line-height: 1.5;
    border-radius: 0.75rem;
}
.markdown-body pre code {
    background: transparent;
    padding: 0;
    color: inherit;
    font-size: inherit;
    font-family: var(--font-mono);
}
.code-copy-btn {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    background: rgba(255,255,255,0.1);
    border: none;
    border-radius: 0.375rem;
    padding: 0.35rem;
    cursor: pointer;
    color: #9CA3AF;
    opacity: 0;
    transition: opacity 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}
.code-copy-btn:active { background: rgba(255,255,255,0.25); }
.markdown-body pre:hover .code-copy-btn { opacity: 1; }
@media (hover: none) { .code-copy-btn { opacity: 0.7; } }
.markdown-body blockquote {
    border-left: 3px solid #DA7756;
    padding-left: 1rem;
    color: #6B6B6B;
    margin: 0.75rem 0;
    font-style: italic;
}
.markdown-body a { color: #DA7756; text-decoration: none; word-break: break-all; }
.markdown-body a:hover { text-decoration: underline; }
.markdown-body table { border-collapse: collapse; margin: 0.75rem 0; display: block; overflow-x: auto; max-width: 100%; }
.markdown-body th, .markdown-body td { border: 1px solid #E5E0D9; padding: 0.625rem 0.875rem; }
.markdown-body th { background: #F0EBE3; font-weight: 600; }
.markdown-body hr { border: none; border-top: 1px solid #E5E0D9; margin: 1.5rem 0; }

/* Dark theme markdown (code mode) */
.bg-gray-800 .markdown-body { color: #E5E7EB; }
.bg-gray-800 .markdown-body h1,
.bg-gray-800 .markdown-body h2,
.bg-gray-800 .markdown-body h3 { color: #F3F4F6; }
.bg-gray-800 .markdown-body code {
    background: #374151;
    color: #F9FAFB;
}
.bg-gray-800 .markdown-body blockquote { color: #9CA3AF; }
.bg-gray-800 .markdown-body a { color: #60A5FA; }
.bg-gray-800 .markdown-body th,
.bg-gray-800 .markdown-body td { border-color: #4B5563; }
.bg-gray-800 .markdown-body th { background: #374151; }

/* Alpine.js cloak - prevent initial flash */
[x-cloak] { display: none !important; }

/* File modal code - horizontal scroll + line numbers */
.file-modal-code {
    background: #f6f8fa;
}
.file-modal-code .code-table {
    border-collapse: collapse;
    width: 100%;
    font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;
    font-size: 12px;
    line-height: 1.5;
    color: #24292e;
}
.file-modal-code .line-num {
    position: sticky;
    left: 0;
    background: #f6f8fa;
    color: #8b949e;
    text-align: right;
    padding: 0 12px 0 18px;
    user-select: none;
    white-space: nowrap;
    vertical-align: top;
    border-right: 1px solid #e1e4e8;
}
.file-modal-code .line-code {
    padding: 0 24px;
    white-space: pre;
    vertical-align: top;
}
.file-modal-code tr:first-child td { padding-top: 12px; }
.file-modal-code tr:last-child td { padding-bottom: 12px; }

/* File modal code highlighting - light theme override */
.file-modal-code .hljs {
    background: transparent;
    color: #24292e;
}
.file-modal-code .hljs-keyword,
.file-modal-code .hljs-selector-tag,
.file-modal-code .hljs-subst { color: #d73a49; }
.file-modal-code .hljs-string,
.file-modal-code .hljs-attr,
.file-modal-code .hljs-symbol,
.file-modal-code .hljs-bullet,
.file-modal-code .hljs-addition { color: #032f62; }
.file-modal-code .hljs-title,
.file-modal-code .hljs-section,
.file-modal-code .hljs-name { color: #6f42c1; }
.file-modal-code .hljs-comment,
.file-modal-code .hljs-quote,
.file-modal-code .hljs-deletion { color: #6a737d; }
.file-modal-code .hljs-built_in,
.file-modal-code .hljs-type,
.file-modal-code .hljs-number,
.file-modal-code .hljs-literal { color: #005cc5; }
.file-modal-code .hljs-variable,
.file-modal-code .hljs-template-variable { color: #e36209; }

/* User message collapse */
.user-msg-content {
    white-space: pre-wrap;
    line-height: 1.5;
}
.user-msg-content.collapsed {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    white-space: normal;
    word-break: break-word;
    padding-bottom: 0.25rem !important;
}

/* Terminal modal */
#terminal-container .xterm {
    height: 100%;
    padding: 4px;
}
#terminal-container .xterm-viewport {
    overflow-y: auto;
}

/* File tree folder expand/collapse */
.folder-chevron {
    transition: transform 0.15s ease-out;
}
.folder-chevron.rotate-90 {
    transform: rotate(90deg);
}
.file-tree-container [data-path] {
    cursor: pointer;
}
